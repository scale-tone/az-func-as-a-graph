(this["webpackJsonpaz-function-as-a-graph-ui"]=this["webpackJsonpaz-function-as-a-graph-ui"]||[]).push([[0],{241:function(e,t,a){},486:function(e,t,a){var n={"./locale":216,"./locale.js":216};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=486},489:function(e,t,a){"use strict";a.r(t);var n,r,o,c,i,s,l,u=a(0),d=a.n(u),g=a(11),p=a.n(g),h=(a(241),a(97)),b=a(98),m=a(226),v=a(225),f=a(224),y=a(518),j=a(521),O=a(492),x=a(522),w=a(524),_=a(526),B=a(527),N=a(523),P=a(222),C=a.n(P),k=a(223),T=a.n(k),S=a(8),z=Object(f.a)(n=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"componentDidMount",value:function(){if(window.location.search.startsWith("?path=")){var e=this.props.state;e.pathText=decodeURIComponent(window.location.search.substr(6)),e.load()}}},{key:"render",value:function(){var e=this,t=this.props.state;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{position:"static",color:"default",children:Object(S.jsxs)(j.a,{children:[Object(S.jsx)(O.a,{variant:"h5",color:"inherit",className:"title-typography",children:Object(S.jsx)(x.a,{color:"inherit",href:window.location.origin+window.location.pathname,children:"Azure Functions as a Graph"})}),Object(S.jsx)(w.a,{fullWidth:!0,className:"filter-textfield",margin:"dense",label:"GitHub link or local path to Functions project",InputLabelProps:{shrink:!0},placeholder:"e.g. 'https://github.com/scale-tone/repka-durable-func'",disabled:t.inProgress,value:t.pathText,onChange:function(e){return t.pathText=e.target.value},onKeyPress:function(t){return e.handleKeyPress(t)}}),Object(S.jsx)(_.a,{width:30}),Object(S.jsx)(B.a,{className:"filter-button",variant:"outlined",color:"secondary",size:"large",disabled:t.inProgress||!t.pathText,onClick:function(){return t.load()},children:"Visualize"})]})}),!!t.inProgress&&Object(S.jsx)(N.a,{}),!!t.error&&Object(S.jsx)(O.a,{className:"error-typography",color:"error",variant:"h5",children:t.error}),!!t.diagramSvg&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"diagram-div",dangerouslySetInnerHTML:{__html:t.diagramSvg}}),Object(S.jsxs)(j.a,{variant:"dense",className:"bottom-toolbar",children:[Object(S.jsxs)(B.a,{variant:"outlined",color:"default",disabled:t.inProgress,onClick:function(){return window.navigator.clipboard.writeText(t.diagramCode)},children:[Object(S.jsx)(C.a,{}),Object(S.jsx)(_.a,{width:10}),Object(S.jsx)(O.a,{color:"inherit",children:"Copy diagram code to Clipboard"})]}),Object(S.jsx)(_.a,{width:20}),Object(S.jsxs)(B.a,{variant:"outlined",color:"default",disabled:t.inProgress,href:URL.createObjectURL(new Blob([t.diagramSvg],{type:"image/svg+xml"})),download:"functions.svg",children:[Object(S.jsx)(T.a,{}),Object(S.jsx)(_.a,{width:20}),Object(S.jsx)(O.a,{color:"inherit",children:"Save as .SVG"})]}),Object(S.jsx)(_.a,{width:20})]})]}),Object(S.jsx)("a",{className:"github-link",href:"https://github.com/scale-tone/az-func-as-a-graph#az-func-as-a-graph",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("img",{loading:"lazy",width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_white_ffffff.png?resize=149%2C149",alt:"Fork me on GitHub","data-recalc-dims":"1"})})]})}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.props.state.load())}}]),a}(d.a.Component))||n,D=a(64),q=(a(247),a(31)),H=a(5),I=a(128),L=a.n(I),F=a(129),U=a.n(F),R=a(227),E=a(48),G="#32;";function M(e){var t,a,n,r,o,c,i;switch(e.type){case"httpTrigger":return"".concat("anonymous"===e.authLevel?"#127760;":"#128274;"," http").concat(e.methods?":["+e.methods.join(",")+"]":"").concat(e.route?":"+e.route:"");case"blobTrigger":return"".concat(G,"blob:").concat(null!==(t=e.path)&&void 0!==t?t:"");case"cosmosDBTrigger":return"".concat(G,"cosmosDB:").concat(null!==(a=e.databaseName)&&void 0!==a?a:"",":").concat(null!==(n=e.collectionName)&&void 0!==n?n:"");case"eventHubTrigger":return"".concat(G,"eventHub:").concat(null!==(r=e.eventHubName)&&void 0!==r?r:"");case"serviceBusTrigger":return"".concat(G,"serviceBus:").concat(e.queueName?e.queueName:null!==(o=e.topicName)&&void 0!==o?o:"").concat(e.subscriptionName?":"+e.subscriptionName:"");case"queueTrigger":return"".concat(G,"queue:").concat(null!==(c=e.queueName)&&void 0!==c?c:"");case"timerTrigger":return"".concat(G,"timer:").concat(null!==(i=e.schedule)&&void 0!==i?i:"");default:return"".concat(G).concat(e.type)}}function W(e){var t,a,n,r,o,c,i;switch(e.type){case"table":return"".concat(G,"table:").concat(null!==(t=e.tableName)&&void 0!==t?t:"");case"blob":return"".concat(G,"blob:").concat(null!==(a=e.path)&&void 0!==a?a:"");case"cosmosDB":return"".concat(G,"cosmosDB:").concat(null!==(n=e.databaseName)&&void 0!==n?n:"",":").concat(null!==(r=e.collectionName)&&void 0!==r?r:"");case"eventHub":return"".concat(G,"eventHub:").concat(null!==(o=e.eventHubName)&&void 0!==o?o:"");case"serviceBus":return"".concat(G,"serviceBus:").concat(e.queueName?e.queueName:null!==(c=e.topicName)&&void 0!==c?c:"").concat(e.subscriptionName?":"+e.subscriptionName:"");case"queue":return"".concat(G,"queue:").concat(null!==(i=e.queueName)&&void 0!==i?i:"");default:return"".concat(G).concat(e.type)}}var K=(r=function(){function e(){Object(h.a)(this,e),Object(D.a)(this,"pathText",o,this),Object(D.a)(this,"_error",c,this),Object(D.a)(this,"_diagramCode",i,this),Object(D.a)(this,"_diagramSvg",s,this),Object(D.a)(this,"_inProgress",l,this),this._iconsSvgPromise=L.a.get("static/icons/all-azure-icons.svg"),U.a.initialize({startOnLoad:!0,flowchart:{curve:"Basis",useMaxWidth:!0,htmlLabels:!1}})}return Object(b.a)(e,[{key:"diagramSvg",get:function(){return this._diagramSvg}},{key:"diagramCode",get:function(){return this._diagramCode}},{key:"error",get:function(){return this._error}},{key:"inProgress",get:function(){return this._inProgress}},{key:"load",value:function(){var e=this;if(!this._inProgress&&this.pathText){this._inProgress=!0,this._error="",this._diagramCode="",this._diagramSvg="";var t=this.pathText;window.history.replaceState(null,null,"?path=".concat(encodeURIComponent(t))),this.pathText="";var a=L.a.post("a/p/i/traverse-func",t);Promise.all([a,this._iconsSvgPromise]).then((function(t){try{var a=function(e){var t=[];for(var a in e){var n,r=e[a],o=void 0,c=[],i=[],s=[],l="".concat(a,'{{"').concat(G).concat(a,'"}}:::function'),u=Object(E.a)(r.bindings);try{for(u.s();!(n=u.n()).done;){var d=n.value;"orchestrationTrigger"===d.type?l="".concat(a,'[["').concat(G).concat(a,'"]]:::orchestrator'):"activityTrigger"===d.type?l="".concat(a,'[/"').concat(G).concat(a,'"/]:::activity'):"entityTrigger"===d.type&&(l="".concat(a,'[("').concat(G).concat(a,'")]:::entity')),d.type.endsWith("Trigger")?o=d:"in"===d.direction?c.push(d):"out"===d.direction?i.push(d):s.push(d)}}catch(q){u.e(q)}finally{u.f()}t.push(Object(R.a)({name:a,nodeCode:l,triggerBinding:o,inputBindings:c,outputBindings:i,otherBindings:s},r))}var g=function(e){var t;return(!(null===(t=e.isCalledBy)||void 0===t?void 0:t.length)&&e.triggerBinding&&e.triggerBinding.type?e.triggerBinding.type:"")+"~"+e.name};t.sort((function(e,t){var a=g(e),n=g(t);return a>n?1:n>a?-1:0}));for(var p="",h=0,b=t;h<b.length;h++){var m,v,f=b[h];if(p+="".concat(f.nodeCode,"\n"),p+="style ".concat(f.name," fill:#D9D9FF,stroke-width:2px\n"),null===(m=f.isCalledBy)||void 0===m?void 0:m.length){var y,j=Object(E.a)(f.isCalledBy);try{for(j.s();!(y=j.n()).done;){var O=y.value;p+="".concat(O," ---\x3e ").concat(f.name,"\n")}}catch(q){j.e(q)}finally{j.f()}}else f.triggerBinding&&(p+="".concat(f.name,".").concat(f.triggerBinding.type,'>"').concat(M(f.triggerBinding),'"]:::').concat(f.triggerBinding.type," --\x3e ").concat(f.name,"\n"));var x,w=Object(E.a)(f.inputBindings);try{for(w.s();!(x=w.n()).done;){var _=x.value;p+="".concat(f.name,".").concat(_.type,'(["').concat(W(_),'"]):::').concat(_.type," -.-> ").concat(f.name,"\n")}}catch(q){w.e(q)}finally{w.f()}var B,N=Object(E.a)(f.outputBindings);try{for(N.s();!(B=N.n()).done;){var P=B.value;p+="".concat(f.name," -.-> ").concat(f.name,".").concat(P.type,'(["').concat(W(P),'"]):::').concat(P.type,"\n")}}catch(q){N.e(q)}finally{N.f()}var C,k=Object(E.a)(f.otherBindings);try{for(k.s();!(C=k.n()).done;){var T=C.value;p+="".concat(f.name," -.- ").concat(f.name,".").concat(T.type,'(["').concat(W(T),'"]):::').concat(T.type,"\n")}}catch(q){k.e(q)}finally{k.f()}if(null===(v=f.isSignalledBy)||void 0===v?void 0:v.length){var S,z=Object(E.a)(f.isSignalledBy);try{for(z.s();!(S=z.n()).done;){var D=S.value;p+="".concat(D.name,' -- "#9889; ').concat(D.signalName,'" ---\x3e ').concat(f.name,"\n")}}catch(q){z.e(q)}finally{z.f()}}f.isCalledByItself&&(p+="".concat(f.name,' -- "[ContinueAsNew]" --\x3e ').concat(f.name,"\n"))}return p}(t[0].data),n=t[1].data;if(!a)return void(e._inProgress=!1);e._diagramCode="graph LR\n".concat(a),U.a.render("mermaidSvgId",e._diagramCode,(function(t){e._diagramSvg=e.applyIcons(t,n),e._inProgress=!1}))}catch(r){e._error="Diagram generation failed: ".concat(r.message),e._inProgress=!1}}),(function(t){e._error="Parsing failed: ".concat(t.message,".").concat(t.response?t.response.data:""),e._inProgress=!1}))}}},{key:"applyIcons",value:function(e,t){return e=(e=e.replace("><style>",">\n<defs>\n".concat(t,"</defs>\n<style>"))).replace(/<g class="node (\w+).*?<g class="label" transform="translate\([0-9,.-]+\)"><g transform="translate\([0-9,.-]+\)">/g,'$&<use href="#az-icon-$1" width="20px" height="20px"/>')}}]),e}(),Object(q.a)(r.prototype,"diagramSvg",[H.f],Object.getOwnPropertyDescriptor(r.prototype,"diagramSvg"),r.prototype),Object(q.a)(r.prototype,"diagramCode",[H.f],Object.getOwnPropertyDescriptor(r.prototype,"diagramCode"),r.prototype),Object(q.a)(r.prototype,"error",[H.f],Object.getOwnPropertyDescriptor(r.prototype,"error"),r.prototype),o=Object(q.a)(r.prototype,"pathText",[H.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(q.a)(r.prototype,"inProgress",[H.f],Object.getOwnPropertyDescriptor(r.prototype,"inProgress"),r.prototype),c=Object(q.a)(r.prototype,"_error",[H.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(q.a)(r.prototype,"_diagramCode",[H.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(q.a)(r.prototype,"_diagramSvg",[H.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=Object(q.a)(r.prototype,"_inProgress",[H.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r);p.a.render(Object(S.jsx)(z,{state:new K}),document.getElementById("root"))}},[[489,1,2]]]);
//# sourceMappingURL=main.f69e10db.chunk.js.map