<html>

<head>
    <meta charset="utf-8" />
    <title>{{PROJECT_NAME}}</title>
</head>

<a style="position: absolute; right: 0px; top: 0px;" href="https://github.com/scale-tone/az-func-as-a-graph#az-func-as-a-graph" target="_blank" rel="noreferrer">
    <img loading="lazy" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_white_ffffff.png?resize=149%2C149" alt="Fork me on GitHub" data-recalc-dims="1" />
</a>

<h1 style="text-align: center;" >{{PROJECT_NAME}}<h1>

{{GRAPH_SVG}}

<script>

    // This line will be replaced with the list of Functions by the generator script
    const functionsMap = {};

    function mountClickEventToFunctionNodes(nodes) {

        for (var i = 0; i < nodes.length; i++) {
            const el = nodes[i];

            const match = /flowchart-(.+)-/.exec(el.id);
            if (!!match) {

                const closuredFunctionName = match[1];
                el.onclick = () => window.open(functionsMap[closuredFunctionName].filePath);
                el.style.cursor = 'pointer';
            }
        }
    }

    // Mounting click handlers to diagram nodes.
    mountClickEventToFunctionNodes(document.getElementsByClassName('function'));
    mountClickEventToFunctionNodes(document.getElementsByClassName('orchestrator'));
    mountClickEventToFunctionNodes(document.getElementsByClassName('activity'));
    mountClickEventToFunctionNodes(document.getElementsByClassName('entity'));

</script>

</html>